# Анализ A/B теста

> Учебный пет-проект по A/B-тестированию: анализ конверсии на старой и новой
> страницах, проверка статистической значимости и доверительных интервалов.

---

## Цели проекта

- Отработать полный цикл работы с A/B-тестом:
  - загрузка и очистка сырых данных;
  - EDA;
  - формулировка гипотез;
  - проверка гипотез статистическим тестом;
  - интерпретация результатов на «человеческом» языке.
- Закрепить матстат:
  - распределения, пропорции, z-тест;
  - связь p-value и доверительных интервалов.
- Отточить работу с pandas / numpy / scipy в контексте A/B-аналитики.

---

## Данные

В работе использовался классический учебный датасет по A/B-тесту с двумя версиями лендинга  
(старая `old_page`, новая `new_page`), где каждому пользователю показана одна из версий,
а целевая метрика — бинарная конверсия.

Файл: `data/ab_data.csv`

Основные поля:

```text
user_id       => уникальный идентификатор пользователя
timestamp     => время показа страницы
group         => экспериментальная группа: control / treatment
landing_page  => версия страницы: old_page / new_page
converted     => целевое действие: 1 — сконвертился, 0 — нет

```
## Проделанная работа

1. **Загрузка и EDA**
   - Проверены размеры таблицы, типы данных и базовые статистики.
   - Изучено распределение пользователей по группам (`control` / `treatment`)
     и по версиям страниц (`old_page` / `new_page`).
   - После чистки группы оказались сбалансированы 145274 против 145311 (примерно 50/50).
   - Удалены строки с несогласованными парами `group–landing_page` - 3893 строки
   - Найден и исключён пользователь, который встречался в обеих группах.
 
2. **Базовые метрики**
   - Для каждой группы посчитаны:
     - количество пользователей;
     - количество конверсий;
     
   Результат:
     - control (`old_page`): конверсия ≈ 0.1208;
     - treatment (`new_page`): конверсия ≈ 0.1188.

3. **Формулировка гипотез**

   - **H0:** Конверсия старой и новой страницы не отличаются
     \(p_{new} == p_{old}\)
   - **H1:**  Конверсия старой и новой страницы отличаются  
     \(p_{new} != p_{old}\)
   - Уровень значимости: \(\alpha = 0.05\).

4. **Проверка гипотезы**

   - Использован z-тест (много пользователей):
     - вручную посчитана z-статистика;
     - получено p-значение
     - дополнительно посчитан классический двусторонний p-value.
   - Построен 95% доверительный интервал для разницы конверсий  
     \(\Delta = p_{new} - p_{old}\).

    Результат:
   - разница конверсий: \(\Delta \approx -0.0016\) (−0.16 п.п.);
   - 95% ДИ: \([-0.0039; 0.0008]\).

   Интервал включает 0, а p-value > 0.05 — следовательно,
   статистически значимого улучшения конверсии у новой страницы не обнаружено.

---

## Ключевые наблюдения

- После очистки данных группы `control` и `treatment` распределены почти поровну.
- Конверсии по группам очень близки:
  - старая страница (`old_page`, control) — ~12.08%;
  - новая страница (`new_page`, treatment) — ~11.88%.
- Абсолютная разница (new − old) составляет около −0.16 процентного пункта,
  что попадает в доверительный интервал, включающий 0.
- Z-тест для двух пропорций при \(\alpha = 0.05\) не показал статистически значимого улучшения:
  нет оснований отклонять H0 и считать, что новая страница увеличивает конверсию.
- С практической точки зрения:
  если эффект и существует, его величина по оценкам очень мала, и выкатывать новую страницу
  на всех пользователей как «однозначно более эффективную» на основании этого теста нецелесообразно.

---

## Запуск

```bash
# 1) создать окружение
python -m venv venv
# Windows
.\venv\Scripts\activate
# macOS / Linux
# source venv/bin/activate

# 2) установить зависимости
pip install -r requirements.txt
pandas, numpy, scipy, matplotlib, seaborn, jupyter

# 3) запустить Jupyter
jupyter lab
# открыть notebooks/eda1.ipynb и выполнить ячейки по порядку
```
___

## Итоговый вывод

В ходе A/B-теста была сравнена конверсия пользователей на старой странице  
(`old_page`, control) и новой странице (`new_page`, treatment).  
Конверсия в контрольной группе составила ≈ 0.1208, в тестовой — ≈ 0.1188.  
Абсолютная разница конверсий (new − old) ≈ −0.0016, 95% доверительный интервал:  
\([-0.0039; 0.0008]\), что включает 0.  
Z-тест при уровне значимости \(\alpha = 0.05\)
не показал статистически значимого улучшения (p-value = 0.19 > 0.05), поэтому у нас нет
оснований отклонять нулевую гипотезу и считать, что новая страница увеличивает конверсию.  
На основе результатов теста не рекомендуется раскатывать новую страницу на всех
пользователей как более эффективную.
